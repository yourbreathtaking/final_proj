<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" href="assets/IMGS/favicon.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEISMAROC</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://unpkg.com/@turf/turf@6.5.0/turf.min.js"></script>
    <!--------CSS LEAFLET-------->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!--------JS LEAFLET-------->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-compare/dist/leaflet-compare.css" />
    <script src="https://unpkg.com/leaflet-compare/dist/leaflet-compare.js"></script>
    <!--------Style CSS -------->
    <link rel="stylesheet" href="assets/CSS/style.css">
    <!-- Lien pour la police Sofia depuis Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Sofia&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet-side-by-side/leaflet-side-by-side.css">
    <script src="https://unpkg.com/leaflet-side-by-side/leaflet-side-by-side.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/deck.gl@latest/dist.min.js"></script>
    <!-- Include the ECharts file you just downloaded -->
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <meta charset=utf-8 />
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui' />
    <title>Leaflet Side-by-side</title>
    <script src='http://cdn.leafletjs.com/leaflet/v1.3.1/leaflet.js'></script>

    <link href='http://cdn.leafletjs.com/leaflet/v1.3.1/leaflet.css' rel='stylesheet' />
    <!--------CSS LEAFLET-------->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!--------JS LEAFLET-------->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-compare/dist/leaflet-compare.css" />
    <script src="https://unpkg.com/leaflet-compare/dist/leaflet-compare.js"></script>
    <script src="https://unpkg.com/georaster"></script>
    <script src="https://unpkg.com/georaster-layer-for-leaflet"></script>
    <script src="assets/JS/leaflet-side-by-side.js">
    </script>
    <script>
        src = "assets/JS/main.js"
    </script>

</head>

<body>
    <style>
        #map {
            width: 800px;
            height: 500px;
        }
        
        .info {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }
        
        .info h4 {
            margin: 0 0 5px;
            color: #777;
        }
        
        .legend {
            text-align: left;
            line-height: 18px;
            color: #555;
        }
        
        .legend i {
            width: 18px;
            height: 18px;
            float: left;
            margin-right: 8px;
            opacity: 0.7;
        }
    </style>

    <!-- Écran de chargement -->
    <!-- Écran de chargement -->
    <div id="loading-screen">
        <img id="loading-favicon" src="assets/IMGS/favicon.ico" alt="Favicon">
        <div id="loading-title">Seismaroc</div>
        <div class="spinner"></div>
    </div>
    <script>
        window.addEventListener("load", function() {
            document.getElementById("loading-screen").classList.add("hidden");
        });
    </script>


    <header>
        <div class="logo"><span><img id="loading-favicon" src="assets/IMGS/favicon.ico" alt="Favicon"></span> Seismaroc</div>
        <nav>
            <ul>
                <li><a href="#accueil">Accueil</a></li>
                <li><a href="#catastrophe">À propos de la catastrophe</a></li>
                <li><a href="#reference">Références</a></li>
                <li><a href="#quisommesnous">Qui sommes-nous ?</a></li>

            </ul>
        </nav>
    </header>


    <section class="hero">
        <div class="slideshow">
            <div class="slide" style="background-image: url('assets/IMGS/SEISME1.jpeg');"></div>
            <div class="slide" style="background-image: url('assets/IMGS/SEISME2.jpg');"></div>
            <div class="slide" style="background-image: url('assets/IMGS/SEISME3.jpg');"></div>
            <div class="slide" style="background-image: url('assets/IMGS/SEISME4.jpg');"></div>

        </div>
        <div class="hero-content">
            <h1>Séisme au Maroc 2023 : Une Tragédie Qui Marque Notre Histoire</h1>
            <p>
                Explorez des cartes interactives, des graphiques dynamiques et des requêtes spatiales pour visualiser l'impact du séisme sur les bâtiments et les communautés locales. Grâce à des outils avancés de visualisation de données et l'intégration de données satellites,
                cette plateforme vous permet d'analyser et de soutenir la reconstruction des zones sinistré<br><strong>Ensemble, reconstruisons l'avenir.</strong><br>
            </p>
            <div class="buttons">
                <a href="#detail" class="btn-detail">Plus de détails</a>
                <a href="#contact" class="btn-contact">Contact</a>
            </div>
        </div>
    </section>


    <h1 class="h1">Bienvenue sur notre carte interactive de la provaince <strong>d'Al Haouz !</strong> </h1>
    <h2 class="h1">Cliquez sur une commune pour afficher les bâtiments avant et après la catastrophe !</h2>





    <div id="control-bar">
        <button onclick="showBefore(nomCommuneCliquee)">Avant la catastrophe</button>
        <button onclick="showAfter(nomCommuneCliquee)">Après la catastrophe</button>
        <button onclick="showComparaison(nomCommuneCliquee)">Afficher la comparaison</button>
    </div>

    <div id="container">

        <div id="map">

        </div>



        <!-- Prepare a DOM with a defined width and height for ECharts -->
        <div id="main" style="width: 600px;height:400px"></div>
    </div>

    <div id="container">
        <div id="pieChart2" style="width: 600px; height: 400px; margin-top: 20px;"></div>
        <div id="pieChart" style="width: 600px; height: 400px; margin-top: 20px;"></div>
    </div>






    <!--------JS-------->
    <script>
        src = "C:\Users\MSI KATANA\Desktop\PROGRAMMER\PROJET\assets\JS\main.js"
    </script>
    <script src="assets/GEOJSON/l7ouz_updt.js"></script>
    <script src="assets/GEOJSON/communes_de_houz.js"></script>
    <script src="assets/GEOJSON/douawer.js"></script>
    <script>
        var map = L.map('map').setView([31.2734, -7.5807], 8.5);
        const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);




        /*

        // Create marker :
            var marker = L.marker([31.2755, -7.5855]).addTo(map);
        */




        /*
        // Create a cercle :

            var circle = L.circle([31.2734, -7.5807], {
            color: 'red',
            fillColor: '#f03',
            fillOpacity: 0.1,
            radius: 10000
        }).addTo(map);

        */
        /*
        // Create a polygone :

        var earthquakePolygon = L.polygon([
            [31.245, -7.986],
            [31.233, -8.442],
            [30.985, -8.421],
            [30.902, -7.958],
            [31.252, -7.740]
        ], 
        {
            color: 'red',      // Couleur du contour
            fillColor: '#f03', // Couleur de remplissage
            fillOpacity: 0.5   // Opacité
        }).addTo(map);



        earthquakePolygon.bindPopup("Les zones affectes par le tremblement de terre");

        // Create a popp up of circle ,polygone and marker :



        // Pour créer une popup qui est dynamique et affiche des info sur la position cliqe par lutilisateur : :
        /*
            var popup = L.popup();

        function onMapClick(e) {

            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(map);
        }

        map.on('click', onMapClick);

        */
        // Creating an icon

        // Création d'une icône Material Design (utilisation d'un divIcon avec la classe Material)
        var materialIcon = L.divIcon({
            className: 'material-icons', // Classe CSS de l'icône
            html: 'favorite', // Icône Material que vous voulez utiliser
            iconSize: [40, 40], // Taille de l'icône
            iconAnchor: [15, 0] // Ancre de l'icône
        });

        // Aj.outer un marqueur avec l'icône à la carte
        //markericone= L.marker([31.2734, -7.5807], {icon: materialIcon}).addTo(map);
        //markericone.bindPopup("Les zones affectes par le tremblement de terre") // Créer le dropdown directement dans l'HTML


        // Create Geojson point

        var geojsonFeature = {
            "type": "Feature",
            "properties": {
                "name": "Coors Field",
                "amenity": "Baseball Stadium",
                "popupContent": "This is where the Rockies play!"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [-7.5807, 31.2734]
            }
        };

        L.geoJSON(geojsonFeature).addTo(map);
        /*
        // Create Geojson Lines
        var myLines = [{
            "type": "LineString",
            "coordinates": [[-7.986, 31.245], [-8.442, 31.233], [-8.421, 30.985]]
        }, {
            "type": "LineString",
            "coordinates": [[-7.958, 30.902], [-7.740, 31.252]]
        }];

        L.geoJSON(myLines).addTo(map);

        [31.245, -7.986],
            [31.233, -8.442],
            [30.985, -8.421],
            [30.902, -7.958],
            [31.252, -7.740]

           

        */



        // control that shows state info on hover
        // control that shows state info on hover
        const info = L.control();

        info.onAdd = function(map) {
            this._div = L.DomUtil.create('div', 'info');
            this.update();
            return this._div;
        };

        info.update = function(props) {
            const contents = props ? `<b>${props.Nom_Commun}</b>` : '';
            this._div.innerHTML = `<h4>Nom de la commune</h4>${contents}`;
        };

        info.addTo(map);


        // get color depending on population density value


        function style(feature) {
            return {
                weight: 3,
                opacity: 0.2,
                color: 'black',
                dashArray: '3',
                fillOpacity: 0.2,
                fillColor: '#3498db',
            };
        }

        function highlightFeature(e) {
            const layer = e.target;

            layer.setStyle({
                weight: 5,
                color: '#666',
                dashArray: '',
                fillOpacity: 0.4
            });

            layer.bringToFront();

            info.update(layer.feature.properties);
        }

        /* global statesData */
        const geojson = L.geoJson(comm, {
            style,
            onEachFeature
        }).addTo(map);

        function resetHighlight(e) {
            geojson.resetStyle(e.target);
            info.update();
        }

        function zoomToFeature(e) {
            map.fitBounds(e.target.getBounds());
        }

        function onEachFeature(feature, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight,
                click: onCommuneClick,
                dblclick: zoomToFeature

            });
        }




        //   douars=L.geoJSON(douars).addTo(map);
        //  douars.bindPopup("Les zones affectes par le tremblement de terre")

        // Variables pour stocker le nom de la commune double-cliquée et la couche précédente
        let nomCommuneCliquee = "";


        // Fonction pour gérer les clics sur les communes
        function onCommuneClick(e) {
            var geojson = L.geoJson(comm, {
                style,
                onEachFeature
            }).addTo(map);


            // Récupère les propriétés de la commune cliquée
            const properties = e.target.feature.properties;

            // Affecte le nom de la commune à la variable
            nomCommuneCliquee = properties.Nom_Commun; // Assurez-vous que le nom de la commune est bien dans "nom_commune"
            console.log("Commune cliquée :", nomCommuneCliquee); // Affiche le nom dans la console

            // Affiche la barre de contrôle
            showControlBar();

            setChartOption(nomCommuneCliquee);
            showBefore(nomCommuneCliquee);
            showstaistics(nomCommuneCliquee)


        }

        let data1 = {}; // This will hold the data from data.json
        let data2 = {};

        // Load JSON data
        async function loadData() {
            const response = await fetch('data1.json');
            data1 = await response.json();
            const response2 = await fetch('data2.json');
            data2 = await response2.json();
        }
        // Couche "Avant la catastrophe" : tous les vecteurs en vert
        var beforeLayer = L.geoJSON(l7ouz_updt.features.filter(feature => feature.properties.Nom_Commun === nomCommuneCliquee), {
            style: {
                color: 'green',
                weight: 2,
                fillOpacity: 0.5
            }
        });

        // Couche "Après la catastrophe" : style conditionnel selon 'confidence'
        var afterLayer = L.geoJSON(l7ouz_updt.features.filter(feature => feature.properties.Nom_Commun === nomCommuneCliquee), {
            style: function(feature) {
                const confidence = feature.properties.confidence;
                let color;

                if (confidence >= 0.75) {
                    color = 'green';
                } else if (confidence > 0.7 && confidence < 0.75) {
                    color = 'orange';
                } else if (confidence >= 0.65 && confidence < 0.7) {
                    color = 'red';
                } else {
                    color = 'gray';
                }

                return {
                    color: color,
                    weight: 2,
                    fillOpacity: 0.5
                };
            }
        });


        // Fonction pour afficher "Avant la catastrophe"
        function showBefore(nomCommuneCliquee) {

            map.removeLayer(afterLayer);
            map.removeLayer(beforeLayer);

            beforeLayer = L.geoJSON(l7ouz_updt.features.filter(feature => feature.properties.Nom_Commun === nomCommuneCliquee), {
                style: {
                    color: 'green',
                    weight: 2,
                    fillOpacity: 0.5
                }
            }).addTo(map);
        }
        // Ajout d'une légende dynamique
        if (typeof legend !== "undefined") {
            map.removeControl(legend); // Supprime la légende existante si elle existe
        }

        legend = L.control({
            position: 'bottomright'
        });

        legend.onAdd = function(map) {
            const div = L.DomUtil.create('div', 'info legend');
            const labels = [
                '<strong>Effet du seisme</strong>',
                '<i style="background: green"></i> Sein',
            ];

            div.innerHTML = labels.join('<br>');
            return div;
        };

        legend.addTo(map);


        // Fonction pour afficher "Après la catastrophe"
        function showAfter(nomCommuneCliquee) {

            map.removeLayer(beforeLayer);
            map.removeLayer(afterLayer);

            afterLayer = L.geoJSON(l7ouz_updt.features.filter(feature => feature.properties.Nom_Commun === nomCommuneCliquee), {
                style: function(feature) {
                    const confidence = feature.properties.confidence;
                    let color;

                    if (confidence >= 0.75) {
                        color = 'green';
                    } else if (confidence > 0.7 && confidence < 0.75) {
                        color = 'orange';
                    } else if (confidence >= 0.65 && confidence < 0.7) {
                        color = 'red';
                    } else {
                        color = 'gray';
                    }

                    return {
                        color: color,
                        weight: 2,
                        fillOpacity: 0.5
                    };
                }
            }).addTo(map);

            // Ajout d'une légende dynamique
            if (typeof legend !== "undefined") {
                map.removeControl(legend); // Supprime la légende existante si elle existe
            }

            legend = L.control({
                position: 'bottomright'
            });

            legend.onAdd = function(map) {
                const div = L.DomUtil.create('div', 'info legend');
                const labels = [
                    '<strong>Niveaux de confiance</strong>',
                    '<i style="background: green"></i> Sein',
                    '<i style="background: orange"></i> Peu detruit',
                    '<i style="background: red"></i> Totalement detruit',
                ];

                div.innerHTML = labels.join('<br>');
                return div;
            };

            legend.addTo(map);
        }





        function showComparaison(nomCommuneCliquee) {
            // Redirection vers un fichier HTML avec un paramètre dans l'URL
            window.location.href = `exemple.html?commune=${encodeURIComponent(nomCommuneCliquee)}`;
        }




        function showControlBar() {
            document.getElementById('control-bar').style.display = 'block';
        }


        const chartDom = document.getElementById('pieChart');
        const chartDom2 = document.getElementById('pieChart2');
        const myChart = echarts.init(chartDom);
        const myChart2 = echarts.init(chartDom2);


        function setChartOption(nomCom) {
            const selectedData1 = data1[nomCom];
            const selectedData2 = data2[nomCom];


            const option = {
                title: {
                    text: `Effet du seisme sur : ${nomCom}`,
                    left: 'center'
                },
                tooltip: {
                    trigger: 'item'
                },
                legend: {
                    orient: 'vertical',
                    left: 'left'
                },
                series: [{
                    name: '',
                    type: 'pie',
                    radius: '50%',
                    data: selectedData1,
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }]
            };
            const option2 = {
                title: {
                    text: `Etat de remboursement de ${nomCom}`,
                    left: 'center'
                },
                tooltip: {
                    trigger: 'item'
                },
                legend: {
                    orient: 'vertical',
                    left: 'left'
                },
                series: [{
                    name: '',
                    type: 'pie',
                    radius: '50%',
                    data: selectedData2,
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }]
            };

            myChart2.setOption(option2);
            myChart.setOption(option);
        }

        // Update the chart when dropdown changes


        // Load data and initialize chart on page load
        window.onload = loadData;

        function showstaistics(nomCommuneCliquee) {
            // Initialize the echarts instance based on the prepared dom
            var myChart = echarts.init(document.getElementById('main'));

            comm.features.forEach(feature => {
                var nomCommune = feature.properties.Nom_Commun;
                if (nomCommune == nomCommuneCliquee) {

                    var nomCommune = nomCommuneCliquee
                    var population = feature.properties.Population
                    var Marocains = feature.properties.Marocains
                    var Etrangers = feature.properties.Etrangers
                    var TypeCommune = feature.properties.Type_Commu

                    console.log(nomCommune, population, Marocains, Etrangers)
                        // Specify the configuration items and data for the chart
                    var option = {
                        title: {
                            text: nomCommune
                        },
                        tooltip: {},
                        legend: {
                            data: ['']
                        },
                        xAxis: {
                            data: ['Population']
                        },

                        yAxis: {},
                        series: [{
                            name: '',
                            type: 'bar',
                            data: [population]
                        }]
                    };

                    // Display the chart using the configuration items and data just specified.
                    myChart.setOption(option);
                };
            })





        }
    </script>


    </div>


    <h2>Données satellitaires du douar EL HNAINE : Comparison avant et aprés le séisme</h2>
    <p>Le séisme qui a frappé la province d'Al Haouz a été d'une gravité exceptionnelle, causant d'importants dégâts matériels et humains dans plusieurs localités, dont Ijoukak. La secousse, qui a eu son épicentre non loin de la région, a secoué toute la
        zone, laissant derrière elle des décombres et une situation de grande précarité. Les infrastructures de transport, les habitations et les commerces ont été sévèrement endommagés, perturbant le quotidien des habitants. À quelques kilomètres d'Ijoukak,
        dans la localité d'El Hanneine, la situation est également préoccupante. Cette zone, qui présente un relief difficile, a subi des destructions considérables. Les maisons, souvent construites de manière traditionnelle et vulnérables aux secousses,
        ont été largement endommagées, mettant en péril la sécurité des habitants. Cependant, comme dans les autres zones touchées, une grande solidarité a émergé, soutenue par les efforts des autorités et des services d'urgence, permettant à la population
        d'El Hanneine de bénéficier d'une aide précieuse pour faire face aux conséquences du séisme. Le processus de reconstruction a débuté, bien que les défis restent considérables, notamment en raison de l'isolement géographique de cette zone montagneuse.</p>


    <div id="map2">
        <div id="mini-map" style="width: 150px; height: 150px; position: absolute; bottom: 10px; left: 10px; border: 2px solid #ccc; z-index: 1000;"></div>
    </div>

    <script>
        // Initialiser la carte Leaflet
        var map2 = L.map('map2').setView([31.2734, -7.5807], 13);

        const osmLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: '&copy; <a href="https://www.esri.com/en-us/home">Esri</a>',
            maxZoom: 19
        }).addTo(map2);
        const stamenLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: '&copy; <a href="https://www.esri.com/en-us/home">Esri</a>',
            maxZoom: 19
        }).addTo(map2);

        // Définir l'URL du fichier GeoTIFF pour l'image à gauche
        var urlToGeoTiffLeft = "expl.tif"; // Remplacez par le chemin de votre fichier GeoTIFF gauche

        // Fonction pour charger un GeoTIFF et créer une couche GeoRaster
        function addGeoTiffLayer(url) {
            return fetch(url)
                .then(response => response.arrayBuffer())
                .then(arrayBuffer => {
                    return parseGeoraster(arrayBuffer).then(georaster => {
                        var layer = new GeoRasterLayer({
                            georaster: georaster,
                            opacity: 1,
                            resolution: 256
                        });
                        return layer;
                    });
                });
        }

        // Créer une couche vide pour la comparaison à droite
        var emptyLayer = L.layerGroup().addTo(map2); // Un groupe vide

        // Ajouter la couche GeoTIFF pour l'image à gauche
        addGeoTiffLayer(urlToGeoTiffLeft).then(leftGeoTiffLayer => {
            // Ajouter la couche GeoTIFF à la carte
            leftGeoTiffLayer.addTo(map2);

            // Ajuster la vue de la carte pour inclure l'image à gauche
            map2.fitBounds(leftGeoTiffLayer.getBounds());

            // Ajouter le contrôle de comparaison
            var compare = L.control.compare([leftGeoTiffLayer, osmLayer], [emptyLayer, stamenLayer]).addTo(map2);
        });




        // Initialisation de la mini-map
        var miniMap = L.map('mini-map', {
            center: map.getCenter(), // Synchronisation initiale du centre
            zoom: map.getZoom() - 5, // Zoom plus faible pour une vue d'ensemble
            zoomControl: false, // Pas de contrôle de zoom sur la mini-map
            attributionControl: false // Pas d'attribution sur la mini-map
        });

        // Ajout de la couche de base à la mini-map
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(miniMap);




        // Ajout d'un rectangle rouge pour représenter la vue principale
        var bounds = map.getBounds(); // Limites actuelles de la carte principale
        var rectangle = L.rectangle(bounds, {
            color: 'red',
            weight: 2,
            fillOpacity: 0
        }).addTo(miniMap);

        // Mettre à jour le rectangle lors du mouvement de la carte principale
        map.on('move', function() {
            var bounds = map.getBounds(); // Obtenir les nouvelles limites
            rectangle.setBounds(bounds); // Mettre à jour les limites du rectangle
            miniMap.setView(map.getCenter(), map.getZoom() - 1, {
                animate: false
            });
        });
    </script>



</body>

</html>